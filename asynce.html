<script src="fx.js"></script>
<script>

//함수를 await하기 위해서는 그 함수가 반드시 promise를 리턴해야한다. 
//함수앞에 async가 붙은건 promise를 리턴한다는 뜻.
  
  function delay(time) {
    return new Promise(resolve => setTimeout(()=>resolve(), time))
  };

  async function delayIdentity(a) {
    await delay(500);
    return a;
  }

  async function f1() {
    const a = await delayIdentity(10);
    const b = await delayIdentity(5);
    return a+b;
  }
  
  go(f1(), log);


  //async await이 나온이유는 표현식으로 되어있는 promise.then의 함수체이닝이 어렵기떄문이다.
  //이 때문에 문장형으로 다루는 async await이 나왔다.

  //파이프라인을 이용하는 이유는 함수합성을 안전하게 하기위해서 쓰는 것이다.
  //파이프라인 코드는 유연성이 높지만 async로 된 함수는 유연성이 적다.(로직을 바꾸려면 코드한줄이 아닌 여러 줄로 구상해야함.)
  //파이프라인 코드는 C. 이나 L. 을 통해서 비동기를 병렬적으로 처리하거나 지연성을 확보할 수 있다.
</script>