<script>
const log = console.log;

const products = [
  { name: '반팔티', price: 15000},
  { name: '긴팔티', price: 20000},
  { name: '핸드폰케이스', price: 15000},
  { name: '후드티', price: 30000},
  { name: '바지', price: 25000}
];
const filter = (f,iter) => {
  let res = [];
  for (const a of iter){
    if(f(a)) res.push(a);
  }
  return res;
}

const map = (f, iter) => {
  let res = [];
  for (const a of iter){
    res.push(f(a));
  }
  return res;
}

log(...map(n=>n.price,filter(p=>p.price<=20000,products)));
log(filter(a=>a%2, function *(){
  yield 1;
  yield 2;
  yield 3;
}()));

const reduce = (f,acc, iter) => {
  if(!iter) {
    iter = acc[Symbol.iterator]();
    acc = iter.next().value;
  }
  for (const a of iter) {
    acc = f(acc,a);
  }
  return acc;
}

const add = (a,b) => a+b;

log(reduce(add, 1, [2,3,4,5]));
log(reduce(add, [1,2,3,4]));

log(reduce(
      (total_price, product)=> total_price + product.price,
      0,
      products))
</script>


